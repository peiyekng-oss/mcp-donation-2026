# WeGive Platform Blueprint

## **Overview**

WeGive is a two-sided marketplace connecting corporate donors with NGO recipients to facilitate the donation of surplus goods. The platform aims to streamline the donation lifecycle, ensure accountability, and generate measurable ESG impact.

## **Platform Guardrails**

These are the core principles governing the platform\'s design, data handling, and operational logic. All development must adhere to these rules.

### **Data & Privacy**

*   **Secure Document Storage:** All charity verification documents (e.g., IPC, ROS, charter) must be stored in a secure, access-controlled environment (e.g., a private cloud bucket) and must only be accessible to authorized platform administrators for verification purposes.
*   **Donor Data Minimization:** Donor business registration information (e.g., UEN) must not be exposed to NGOs. Only essential information required for pickup coordination (e.g., pickup address, contact person) should be shared after a donation is accepted.
*   **Data Retention Policy:** Photo evidence submitted for quality disputes will be automatically and permanently purged from the system after 90 days.

### **Trust & Safety**

*   **3-Strike System:** NGO no-shows for a confirmed pickup will automatically accumulate one strike. Upon reaching 3 strikes, the NGO\'s account will be automatically suspended, pending a manual review by a platform administrator.
*   **24-Hour Quality Check Window:** After a pickup is confirmed, the receiving NGO has a 24-hour window to report any quality disputes. If no dispute is raised within this timeframe, the donation is automatically marked as `Confirmed`.
*   **Mandatory Dispute Evidence:** All quality disputes must be accompanied by photographic evidence clearly showing the discrepancy.
*   **Admin-Led Arbitration:** All disputes are escalated to a platform administrator for review. The admin will make a final, binding decision (e.g., void donation, issue partial credit, warn donor).
*   **First-to-Accept Model:** To ensure fairness and prevent multiple claims on a single donation, a listing is immediately locked and becomes unavailable to other NGOs once it is accepted by the first NGO.

### **Platform Integrity**

*   **Mandatory Listing Fields:** A donation listing cannot be `Published` unless it includes the following mandatory fields: item type, quantity, at least one photo, and a pickup window. Incomplete listings can only be saved as a `Draft`.
*   **Advisory Estimation Tool:** The outputs from any estimation tools (e.g., for event surplus) are strictly advisory. The donor is required to manually confirm the final quantities before publishing the listing.
*   **Standardized Impact Metrics:** Impact metrics, such as carbon saved or the estimated monetary value of a donation, must be calculated using standardized, pre-defined conversion tables maintained by the platform. Self-reported values from donors are not used for official reporting.
*   **Immutable Donation Receipts:** Donation receipts are generated by the system only after a donation is `Confirmed`. Once generated, these receipts are immutable and cannot be edited by either the donor or the NGO.

### **Scalability & Performance**

*   **Geo-matching SLA:** The geo-matching engine must be optimized to return a ranked list of eligible NGOs within a 3-second timeframe from the moment a query is initiated.
*   **Notification Delivery SLA:** The notification system (e.g., push, SMS, email) must deliver alerts to all matched NGOs within 30 seconds of a new listing being published.
*   **High Concurrency:** The platform architecture must be robust enough to handle a minimum of 500 corporate donors publishing listings concurrently without performance degradation.

### **Compliance**

*   **IPC Alignment:** The NGO verification process must align with the regulatory requirements for Institutions of a Public Character (IPC) in Singapore.
*   **GRI-Compatible Reporting:** The format of ESG and CSR reports generated by the platform must be compatible with Global Reporting Initiative (GRI) Standards and other local disclosure requirements.
*   **Food Safety Disclaimer:** For listings involving perishable items, the expiry date and required storage conditions must be prominently displayed. The platform will include a clear liability disclaimer stating that it does not guarantee food safety and that responsibility lies with the donor and recipient.

## **Platform Architecture**

A system supporting three actor lanes and one exception layer:

| Lane                | Description                                                                    |
| :------------------ | :----------------------------------------------------------------------------- |
| **Corporate Donor** | Register → Create surplus listings → Coordinate pickup → View impact dashboard |
| **Platform**        | Admin verification → Geo-match engine → Notification dispatch → Quality arbitration |
| **NGO Recipient**   | Register & verify → Set preferences/capacity → Accept matches → Execute pickup → Report redistribution |
| **Exception Flows** | Listing expiry, NGO no-show, quality disputes, donor cancellation             |

## **Corporate Donor Journey — 12 Steps**

| Step | Name                            | Description                                                                                                     |
| :--- | :------------------------------ | :-------------------------------------------------------------------------------------------------------------- |
| 1    | Register & Verify Business      | Sign up with UEN/business registration number. Upload supporting documents. Admin reviews and approves.         |
| 2    | Set Company Profile & Locations | Configure default pickup address(es), operating hours, contact person, and preferred donation categories.       |
| 3    | Create Surplus Listing          | Enter: item type, quantity, expiry date, photo upload, storage condition, pickup window.                        |
| 4    | Use Estimation Tool (optional)  | For event-based surplus: enter planned pax and actual attendance. Auto-calculates estimated surplus.           |
| 5    | Save Draft or Publish           | Save incomplete listings as Draft or Publish immediately. Publishing triggers geo-matched NGO notifications.    |
| 6    | NGO Accepts — Listing Locked    | Donor receives confirmation. Status → Accepted. Sees NGO name, rating, estimated pickup time.                  |
| 7    | Mark Items "Ready for Donation" | Donor stages items and marks them ready in-app. Updated photo optional. Triggers "ready" notification to NGO. |
| 8    | Pickup Coordination             | Shared pickup slot visible to both parties. In-app messaging for logistics questions. Status → Pickup Scheduled. |
| 9    | Pickup Confirmed                | NGO agent confirms receipt at location. Both parties add condition notes. Status → Picked Up.                   |
| 10   | Post-Pickup Quality Check       | NGO has 24 hours to confirm items match listing. No response → auto-confirmed. Mismatch → dispute raised.     |
| 11   | Donation Receipt Generated      | Auto-generated PDF: items, quantity, estimated value, carbon saved, NGO recipient, date.                      |
| 12   | Impact Dashboard Updated        | Cumulative ESG metrics update. Feeds into downloadable quarterly CSR summary.                                   |

## **NGO Recipient Journey — 8 Steps**

| Step | Name                         | Description                                                                                               |
| :--- | :--------------------------- | :-------------------------------------------------------------------------------------------------------- |
| 1    | Register & Get Verified      | Sign up with charity registration number (IPC, ROS). Upload charter documents. Admin verifies.            |
| 2    | Set Preferences & Capacity   | Configure: accepted categories, max weekly intake, pickup radius, vehicles, operating hours, blackout dates. |
| 3    | Receive Matched Notification | Push/SMS when listing matches preferences and radius. Proximity-ranked alerts.                            |
| 4    | Review & Accept or Decline   | View full details, photos, distance. First-to-accept model. Decline passes to next NGO.                   |
| 5    | Coordinate Pickup            | View pickup address, contact person, access instructions. Confirm time within donor\'s window.             |
| 6    | Execute Pickup & Confirm     | Verify items at location, photo of collected goods, confirm in-app. Timestamped record for both parties.  |
| 7    | Quality Check (24hr)         | Confirm items match description within 24 hours. Mismatch → dispute with photo evidence.                  |
| 8    | Redistribute & Report Impact | Log how items were distributed (beneficiaries served). Feeds into donor\'s impact report.                  |

## **Listing State Machine**

*   **Happy Path:**
    *   Draft → Active → Accepted → Scheduled → Picked Up → Confirmed → Closed
*   **Exception States:**
    *   Expired | Cancelled | Disputed

## **Decision Points**

| Decision         | Logic                                                                                                                                              |
| :--------------- | :------------------------------------------------------------------------------------------------------------------------------------------------- |
| **NGO Response** | Accepted → Continue to Step 6. No NGO accepts → Listing auto-expires. Donor can extend window, widen radius, or close. Edit needed → Modify while Active (before acceptance). |
| **Capacity**     | At capacity → Warning shown, can still accept. Decline → Listing stays Active, next NGO notified.                                                |
| **NGO No-Show**  | Donor reports no-show → Listing re-activates → Offered to next-nearest NGOs → No-show NGO receives strike (3 strikes = suspension).                |

## **Exception Flows — 4 Paths**

| Exception            | Flow                                                                                                                          |
| :------------------- | :---------------------------------------------------------------------------------------------------------------------------- |
| **Listing Expiry**   | No NGO accepts within pickup window → Auto-expire → Notify donor → Option to extend window, widen radius, or close listing.    |
| **NGO No-Show**      | NGO fails to pick up → Donor reports no-show → Listing re-activates to next NGO → Strike applied (3 strikes = suspension).      |
| **Quality Dispute**  | Items don\'t match listing → NGO raises dispute with photo evidence → Admin reviews → Resolution: void, partial credit, or warning. |
| **Donor Cancellation** | Donor cancels listing → If before acceptance: simple close → If after acceptance: notify NGO, cancel, status → Cancelled.      |

## **Tech Stack Integration**

| Tool                 | Purpose                                                                             |
| :------------------- | :---------------------------------------------------------------------------------- |
| **HubSpot**          | CRM — donor/NGO relationship management, lifecycle tracking, communication logs     |
| **Google Maps API**  | Geolocation — proximity matching, pickup radius configuration, distance calculations |
| **Google Calendar**  | Scheduling — pickup window coordination, appointment booking, reminders             |
| **Excel Sheet Export** | Reporting — CSR summaries, donation receipts, impact metrics export                 |

## **Development Plan**

### **Phase 1: Corporate Donor Journey Implementation (Complete)**

This phase focused on a 12-step journey for the corporate donor, from registration to the impact dashboard. The necessary UI components, pages, and logic to support this workflow have been created.

### **Phase 2: NGO Recipient Journey Implementation (Complete)**

This phase focused on the 8-step journey for the NGO recipient.

### **Phase 3: Platform & Admin Features (Complete)**

This phase focused on the platform-level features, including the admin verification dashboard, the geo-matching engine, notification dispatch, and the quality arbitration system.

*   **NGO Verification Dashboard (DONE)**
*   **Dispute Resolution Dashboard (DONE)**
*   **User Management (DONE)**
*   **Platform Analytics (DONE)**

### **Phase 4: Tech Stack Integration (In Progress)**

In this final phase, we will integrate the platform with the specified third-party services.

*   **HubSpot Integration (DONE)**
    *   Installed the HubSpot API client.
    *   Created a simulated backend service to handle HubSpot API communication.
    *   Created a frontend service to interact with the simulated backend.
    *   Integrated with the donor and NGO registration pages to sync new user data to HubSpot.

*   **Google Maps API Integration (DONE)**
    *   Installed the Google Maps API library for React.
    *   Created a reusable Map component.
    *   Integrated the Map component into the pickup coordination page.

*   **Google Calendar Integration (DONE)**
    *   Installed Google API libraries.
    *   Created a simulated backend service for Google Calendar.
    *   Created a frontend service for Google Calendar.
    *   Integrated with the pickup coordination page.

*   **Excel Sheet Export (In Progress)**
    *   Install the `xlsx` library.
    *   Create a service for exporting data to Excel.
    *   Integrate the export service with the donor\'s impact dashboard.
